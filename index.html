<!DOCTYPE html>
<html lang="en">    
    <head>        
        <meta charset="utf-8">        
        <title>Incidents Responded to by Fire Companies</title>        
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
       <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script type="text/javascript" src="d3/d3.js"></script> 
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.0.1/spin.min.js'></script> 
        <link rel="stylesheet" href="css/style.css">
    </head>    
    <body style="text-align:center">  
    
    <!-- Navigation -->
    <div id="navbarmd">
        <div class="row" style="width: 100%;">
            <div class="col-sm-8">
                <div style="margin-left:20px;color:#9b9b9b">
                <div style="float: left;"><img src="img/vzla1.png" height="60px"/></div>
                <div style="float: left;"><h3 style="margin-top:15px;margin-left:10px">Venezuela data</h3></div>
                </div>
            </div>
            <div class="col-sm-4">
                <nav class="navbar navbar-expand-lg navbar-light float-right">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                        <li class="nav-item active">
                            <a class="nav-link" href="#">ECONOMICS <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link disabled" href="#">SOCIAL</a>
                        </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
    
    <div id="topMenu">
<div id="box">
  <div class="scroller scroller-left"><img src="img/arrow_left2.png" style="    height: 30px;"/></div>
  <div class="scroller scroller-right"><img src="img/arrow_right2.png" style="    height: 30px;"/></div>
  <div class="wrapper">
    <div class="list">
      <div class="item">Sustainable development</div>
      <div class="item"><a href="#section1">Education</a></div>
      <div class="item">Socioeconomic Indicators</div>
      <div class="item">Tourism in Venezuela</div>
      <div class="item">Populations of concern originating from Venezuela</div>
      <div class="item">ISP Speed Index</div>
      <div class="item">Venezuela Consumer Confidence</div>
      <div class="item">Nine</div>
      <div class="item">Nine</div>
      <div class="item">Nine</div>
      <div class="item">Nine</div>
      <div class="item">Nine</div>
      
      <div class="item">Ten Ten Ten</div>
      <div class="item">Een!</div>
      <div class="item">Ereferfewrfen!</div>
      <div class="item">Eerferfen!</div>
      <div class="item">WWW!</div>
      
      <div class="item">Ten Ten Ten</div>
      <div class="item">Een!</div>
      <div class="item">Ereferfewrfen!</div>
      <div class="item">Eerferfen!</div>
      
      <div class="item">Ten Ten Ten</div>
      <div class="item">Een!</div>
      <div class="item">Ereferfewrfen!</div>
      <div class="item">Last item</div>
    </div>
  </div>
</div>
</div>
    

    <div id="container">
        <div id="section1" style="margin-top:30px;margin-bottom:30px">
            <h3>Education</h3>
            
            <div class="row" style="margin-top:30px;width:100%">
            <div class="col-6 col-sm-3">
                <div class="box-content"> 
                <div id="titleStory">Primary</div>
                <div>
                Primary education of all intitutions, at least 2 years over age
                </div>
                </div>
            </div>
            <div class="col-12 col-md-9">.
                <div id="graphics">
                <div id = "barchar" class="centergraphs" >
                    
                </div>
                <div id="options" class="centergraphs">
                <ul>
                <li id="ff"><span>Females</span></li>
                <li id="fm"><span>Males</span></li>
                </ul>
                </div>
                </div>
            </div>
            </div>
            
        </div>
    </div>
    
    
    <script type="text/javascript"> 
        //Width and height
        var w = 500;
        var h = 400;
        
        d3.csv("data/sdev.csv", function(data) {
                var row = 1;
                var data_primary = [], data_primary2=[];
                data.map(function(d){
                    if (row==1) {
                        data_primary.push(["2007",d["2007"]]);
                        data_primary.push(["2008",d["2008"]]);
                        data_primary.push(["2009",d["2009"]]);
                        data_primary.push(["2010",d["2010"]]);
                        data_primary.push(["2011",d["2011"]]);
                        data_primary.push(["2012",d["2012"]]);
                        data_primary.push(["2013",d["2013"]]);
                        data_primary.push(["2014",d["2014"]]);
                        data_primary.push(["2015",d["2015"]]);
                        data_primary.push(["2016",d["2016"]]);
                    }
                    if (row==2) {
                        data_primary2.push(["2007",d["2007"]]);
                        data_primary2.push(["2008",d["2008"]]);
                        data_primary2.push(["2009",d["2009"]]);
                        data_primary2.push(["2010",d["2010"]]);
                        data_primary2.push(["2011",d["2011"]]);
                        data_primary2.push(["2012",d["2012"]]);
                        data_primary2.push(["2013",d["2013"]]);
                        data_primary2.push(["2014",d["2014"]]);
                        data_primary2.push(["2015",d["2015"]]);
                        data_primary2.push(["2016",d["2016"]]);
                        return;
                    }
                    row++;
                    
                });
                console.log(data_primary);
                createbar(data_primary,data_primary2);
        });
        
        function createbar(datap,datap2) {
            var botPadding = 40;
            var sidePadding = 45;
        
            var years = [];
            for (var i = 0; i < datap.length; i++){
                    years.push(datap[i][0]);
            }
            
            //Scales
            var xScale = d3.scaleBand() //create an ordinal scale
                        .domain(years)
                        .rangeRound([sidePadding, w-sidePadding])
                        .paddingInner(0.25); //for the bars not touching each other
            
            var yScale = d3.scaleLinear()
                        .domain([0, 100]) //max of all d[1]
                        .range([botPadding, h-botPadding]);
            
            //Create SVG element
            var svg = d3.select("#barchar")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);
                        
            //Create bars
            svg.selectAll("rect")
                .data(datap)
                .enter()
                .append("rect")
                .attr("x", function(d) {
                            return xScale(d[0]); // months from Jan to Dec will be scaled to positions in x axis
                })
                .attr("y", function(d) {
                            return h - yScale(d[1]); 
                })
                .attr("width", xScale.bandwidth()) //width per bar
                .attr("height", function(d) {
                            return yScale(d[1]) - botPadding; 
                })
                .attr("fill", function(d) {
                            return "#141480";
                });
                                
            //X axis
            var xAxis = d3.axisBottom();
            xAxis.scale(xScale);
            svg.append("g")
                    .attr("class", "x axis")
                    .attr("transform", "translate(0, " + (h - botPadding) + ")")
                    .call(xAxis);
            //Y axis
            var yAxis = d3.axisLeft();
            yAxis.scale(yScale.range([h-botPadding, botPadding]));
            yAxis.tickFormat(d3.format("d")); 
            svg.append("g")
                    .attr("class", "y axis")
                    .attr("transform", "translate(" + (sidePadding) + ",0)")                
                    .call(yAxis);
                    
            var changebar = function(nm){
                var newDataset = (nm) ? datap : datap2;
                var color = (nm) ? "#141480" : "#ff2a1a";
                        
                yAxis = d3.axisLeft();
                svg.selectAll("g.y.axis").transition().duration(500).call(yAxis.scale(yScale.range([h-botPadding, botPadding])));
                        // return range to normal for bars
                yScale.range([botPadding, h-botPadding]);

                // rebind data
                svg.selectAll("rect")
                    .data(newDataset)
                    .transition() 
                    .duration(500)
                    .ease(d3.easeCubicInOut) 
                    .attr("y", function(d){
                        return h - yScale(d[1]);
                        })
                    .attr("height", function(d){
                        return yScale(d[1]) - botPadding;
                        })
                        .attr("fill", function(d){
                                return color;
                        })
                            
            }
            
            d3.select("#ff")
            .on("click", function(){
                    d3.select("g.y.axis").transition().duration(500).call(yAxis.ticks()); 
                    changebar(1);
            });
            d3.select("#fm")
            .on("click", function(){
                    d3.select("g.y.axis").transition().duration(500).call(yAxis.ticks(2));
                    changebar(0);
            });
        }
        
        
        
    </script>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="js/aux.js" ></script>
    <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    </body>
</html>